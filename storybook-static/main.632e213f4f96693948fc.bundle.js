(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(module,exports,__webpack_require__){var content=__webpack_require__(675);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(153)(content,options);content.locals&&(module.exports=content.locals)},320:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tile_1=__webpack_require__(321);exports.renderMap=function renderMap(args){var ctx=args.ctx,width=args.width,height=args.height,size=args.size,pan=args.pan,nw=args.nw,se=args.se,center=args.center,layers=args.layers;ctx.clearRect(0,0,width,height);for(var halfWidth=width/2,halfHeight=height/2,_i=0,layers_1=layers;_i<layers_1.length;_i++)for(var layer=layers_1[_i],x=nw.x;x<se.x;x++)for(var y=se.y;y<nw.y;y++){var offsetX=(center.x-x)*size+(pan?pan.x:0),offsetY=(y-center.y)*size+(pan?pan.y:0),tile=layer(x,y);if(tile){var color=tile.color,top_1=tile.top,left=tile.left,topLeft=tile.topLeft,scale=tile.scale,halfSize=scale?size*scale/2:size/2;tile_1.renderTile({ctx:ctx,x:halfWidth-offsetX+halfSize,y:halfHeight-offsetY+halfSize,size:size,padding:size<7?.5:size<12?1:size<18?1.5:2,offset:1,color:color,left:left,top:top_1,topLeft:topLeft,scale:scale})}}}},321:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderTile=function renderTile(args){var ctx=args.ctx,x=args.x,y=args.y,size=args.size,padding=args.padding,offset=args.offset,color=args.color,left=args.left,top=args.top,topLeft=args.topLeft,scale=args.scale;ctx.fillStyle=color;var tileSize=scale?size*scale:size;top||left?top&&left&&topLeft?ctx.fillRect(x-tileSize-offset,y-tileSize-offset,tileSize+offset,tileSize+offset):(left&&ctx.fillRect(x-tileSize-offset,y-tileSize+padding,tileSize+offset,tileSize-padding),top&&ctx.fillRect(x-tileSize+padding,y-tileSize-offset,tileSize-padding,tileSize+offset)):ctx.fillRect(x-tileSize+padding,y-tileSize+padding,tileSize-padding,tileSize-padding)}},322:function(module,exports,__webpack_require__){var content=__webpack_require__(682);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(153)(content,options);content.locals&&(module.exports=content.locals)},334:function(module,exports,__webpack_require__){__webpack_require__(335),__webpack_require__(439),module.exports=__webpack_require__(440)},440:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(43),req=__webpack_require__(586);react_1.configure(function loadStories(){req.keys().forEach(req)},module)}).call(this,__webpack_require__(21)(module))},50:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ResizableTileMap_1=__webpack_require__(596);exports.TileMap=ResizableTileMap_1.ResizableTileMap;var map_1=__webpack_require__(320);exports.renderMap=map_1.renderMap;var tile_1=__webpack_require__(321);exports.renderTile=tile_1.renderTile},586:function(module,exports,__webpack_require__){var map={"./0_Basic.stories.tsx":587,"./1_Chessboard.stories.tsx":676,"./2_Selection.stories.tsx":677,"./3_Hover.stories.tsx":678,"./4_Click.stories.tsx":679,"./5_Connect.stories.tsx":680,"./6_Atlas.stories.tsx":681,"./7_Atlas_complex.stories.tsx":683,"./8_Atlas_controlled_zoom.stories.tsx":684,"./9_Atlas_controlled_xy.stories.tsx":706};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=586},587:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer } from '../src';\n\nimport './stories.css';\n\nconst simpleLayer: Layer = (x, y) => {\n  return {\n    color: '#cccccc',\n  };\n};\n\nstoriesOf('TileMap', module).add('0. Basic', () => <TileMap layers={[simpleLayer]} />);\n",exports.__ADDS_MAP__={"tilemap--0-basic":{startLoc:{col:33,line:14},endLoc:{col:85,line:14}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50);__webpack_require__(211);var simpleLayer=function(x,y){return{color:"#cccccc"}};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("0. Basic",function(){return React.createElement(src_1.TileMap,{layers:[simpleLayer]})})}).call(this,__webpack_require__(21)(module))},596:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),react_virtualized_1=__webpack_require__(709),TileMap_1=__webpack_require__(660),resizableDefaultProps=__assign({},TileMap_1.TileMap.defaultProps,{width:void 0,height:void 0}),ResizableTileMap=function(_super){function ResizableTileMap(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ResizableTileMap,_super),ResizableTileMap.prototype.render=function(){var _this=this;return React.createElement(react_virtualized_1.AutoSizer,null,function(props){return React.createElement(TileMap_1.TileMap,__assign({},props,_this.props))})},ResizableTileMap.defaultProps=resizableDefaultProps,ResizableTileMap}(React.PureComponent);exports.ResizableTileMap=ResizableTileMap},660:function(module,exports,__webpack_require__){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var React=__webpack_require__(0),debounce_1=__webpack_require__(661),panzoom_1=__webpack_require__(662),viewport_1=__webpack_require__(671),map_1=__webpack_require__(320);__webpack_require__(672);var TileMap=function(_super){function TileMap(props){var _this=_super.call(this,props)||this;_this.debouncedRenderMap=debounce_1.debounce(_this.renderMap.bind(_this),400),_this.debouncedUpdateCenter=debounce_1.debounce(_this.updateCenter.bind(_this),50),_this.debouncedHandleChange=debounce_1.debounce(_this.handleChange.bind(_this),50),_this.handlePanZoom=function(args){if(_this.props.isDraggable){var dx=args.dx,dy=args.dy,dz=args.dz,_a=_this.props,size=_a.size,maxSize=_a.maxSize,minSize=_a.minSize,minX=_a.minX,maxX=_a.maxX,minY=_a.minY,maxY=_a.maxY,padding=_a.padding,_b=_this.state,pan=_b.pan,zoom=_b.zoom,maxZoom=maxSize/size,minZoom=minSize/size,newPan={x:pan.x-dx,y:pan.y-dy},newZoom=Math.max(minZoom,Math.min(maxZoom,zoom-dz*_this.getDzZoomModifier())),newSize=newZoom*size,halfWidth=(_this.state.width-padding)/2,halfHeight=(_this.state.height-padding)/2,boundaries_nw={x:minX-halfWidth,y:maxY+halfHeight},boundaries_se={x:maxX+halfWidth,y:minY-halfHeight},viewport_nw={x:_this.state.center.x-halfWidth,y:_this.state.center.y+halfHeight},viewport_se={x:_this.state.center.x+halfWidth,y:_this.state.center.y-halfHeight};viewport_nw.x+newPan.x/newSize<boundaries_nw.x&&(newPan.x=(boundaries_nw.x-viewport_nw.x)*newSize),viewport_nw.y-newPan.y/newSize>boundaries_nw.y&&(newPan.y=(viewport_nw.y-boundaries_nw.y)*newSize),viewport_se.x+newPan.x/newSize>boundaries_se.x&&(newPan.x=(boundaries_se.x-viewport_se.x)*newSize),viewport_se.y-newPan.y/newSize<boundaries_se.y&&(newPan.y=(viewport_se.y-boundaries_se.y)*newSize),_this.setState({pan:newPan,zoom:newZoom,size:newSize}),_this.renderMap(),_this.debouncedUpdateCenter()}},_this.handleClick=function(event){var _a=_this.mouseToCoords(event.offsetX,event.offsetY),x=_a[0],y=_a[1];if(_this.inBounds(x,y)){var _b=_this.props,onClick=_b.onClick,onMouseUp=_b.onMouseUp;if(onClick)Date.now()-_this.mousedownTimestamp<200&&(onClick(x,y),_this.renderMap());onMouseUp&&(onMouseUp(x,y),_this.renderMap())}},_this.handleMouseDown=function(event){var onMouseDown=_this.props.onMouseDown;if(_this.mousedownTimestamp=Date.now(),onMouseDown){var _a=_this.mouseToCoords(event.offsetX,event.offsetY),x=_a[0],y=_a[1];if(!_this.inBounds(x,y))return;onMouseDown(x,y),_this.renderMap()}},_this.handleMouseMove=function(event){var offsetX=event.offsetX,offsetY=event.offsetY,_a=_this.mouseToCoords(offsetX,offsetY),x=_a[0],y=_a[1];_this.inBounds(x,y)?_this.hover&&_this.hover.x===x&&_this.hover.y===y||(_this.hover={x:x,y:y},_this.showPopup(x,y,offsetX,offsetY)):_this.hidePopup()},_this.handleMouseOut=function(){_this.hidePopup()},_this.refCanvas=function(canvas){_this.canvas=canvas},_this.handleTarget=function(){var _a=_this.props,x=_a.x,y=_a.y;_this.setState({center:{x:x,y:y}})};var x=props.x,y=props.y,initialX=props.initialX,initialY=props.initialY,size=props.size,zoom=props.zoom,initialState={pan:{x:props.panX,y:props.panY},center:{x:null==x?initialX:x,y:null==y?initialY:y},size:zoom*size,zoom:zoom,popup:null};return _this.state=_this.generateState(props,initialState),_this.oldState=_this.state,_this.hover=null,_this.mounted=!1,_this.canvas=null,_this.popupTimeout=null,_this}return __extends(TileMap,_super),TileMap.prototype.UNSAFE_componentWillUpdate=function(nextProps,nextState){var _a=this.props,x=_a.x,y=_a.y;x===nextProps.x&&y===nextProps.y||nextProps.x===nextState.center.x&&nextProps.y===nextState.center.y||(nextState=__assign({},nextState,{center:{x:nextProps.x,y:nextProps.y},pan:{x:0,y:0}}));var newState=this.generateState(nextProps,nextState),isViewportDifferent=newState.width!==this.oldState.width||newState.height!==this.oldState.height||newState.nw.x!==this.oldState.nw.x||newState.nw.y!==this.oldState.nw.y||newState.se.x!==this.oldState.se.x||newState.se.y!==this.oldState.se.y||newState.zoom!==this.oldState.zoom;nextProps.x===x&&nextProps.y===y&&this.oldState&&!isViewportDifferent||(this.oldState=newState,this.setState(newState),this.debouncedHandleChange())},TileMap.prototype.UNSAFE_componentWillReceiveProps=function(nextProps){var zoom=nextProps.zoom,maxSize=nextProps.maxSize,minSize=nextProps.minSize,size=nextProps.size,maxZoom=maxSize/size,minZoom=minSize/size,newZoom=Math.max(minZoom,Math.min(maxZoom,zoom));newZoom!==this.props.zoom&&newZoom!==this.state.zoom&&this.setState({zoom:newZoom,size:this.props.size*newZoom})},TileMap.prototype.componentDidUpdate=function(){this.debouncedRenderMap(),this.oldState=this.state},TileMap.prototype.componentDidMount=function(){var isDraggable=this.props.isDraggable;this.renderMap(),this.canvas&&(isDraggable&&(this.destroy=panzoom_1.panzoom(this.canvas,this.handlePanZoom)),this.canvas.addEventListener("click",this.handleClick),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("mouseout",this.handleMouseOut)),this.mounted=!0},TileMap.prototype.componentWillUnmount=function(){this.destroy&&this.destroy(),this.canvas&&(this.canvas.removeEventListener("click",this.handleClick),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("mouseout",this.handleMouseOut)),this.mounted=!1},TileMap.prototype.generateState=function(props,state){var width=props.width,height=props.height,padding=props.padding,pan=state.pan,zoom=state.zoom,center=state.center,size=state.size,viewport=viewport_1.getViewport({width:width,height:height,center:center,pan:pan,size:size,padding:padding});return __assign({},viewport,{pan:pan,zoom:zoom,center:center,size:size})},TileMap.prototype.handleChange=function(){var onChange=this.props.onChange,_a=this.state,nw=_a.nw,se=_a.se,center=_a.center,zoom=_a.zoom;this.mounted&&onChange&&onChange({nw:nw,se:se,center:center,zoom:zoom})},TileMap.prototype.mouseToCoords=function(x,y){var padding=this.props.padding,_a=this.state,size=_a.size,pan=_a.pan,center=_a.center,width=_a.width,height=_a.height,panOffset_x=(x+pan.x)/size,panOffset_y=(y+pan.y)/size,viewportOffset_x=(width-padding-.5)/2-center.x,viewportOffset_y=(height-padding)/2+center.y;return[Math.round(panOffset_x-viewportOffset_x),Math.round(viewportOffset_y-panOffset_y)]},TileMap.prototype.inBounds=function(x,y){var _a=this.props,minX=_a.minX,minY=_a.minY,maxX=_a.maxX,maxY=_a.maxY;return x>=minX&&x<=maxX&&y>=minY&&y<=maxY},TileMap.prototype.showPopup=function(x,y,top,left){var _this=this,_a=this.props,onPopup=_a.onPopup,onHover=_a.onHover;onPopup&&(this.hidePopup(),this.popupTimeout=+setTimeout(function(){_this.mounted&&_this.setState({popup:{x:x,y:y,top:top,left:left,visible:!0}},function(){return onPopup(_this.state.popup)})},400)),onHover&&(onHover(x,y),this.renderMap())},TileMap.prototype.hidePopup=function(){var _this=this,onPopup=this.props.onPopup;onPopup&&(this.popupTimeout&&clearTimeout(this.popupTimeout),this.state.popup&&this.setState({popup:__assign({},this.state.popup,{visible:!1})},function(){onPopup(_this.state.popup)}))},TileMap.prototype.updateCenter=function(){var _a=this.state,pan=_a.pan,center=_a.center,size=_a.size,panX=pan.x%size,panY=pan.y%size,newPan={x:panX,y:panY},newCenter={x:center.x+Math.floor((pan.x-panX)/size),y:center.y-Math.floor((pan.y-panY)/size)};this.setState({pan:newPan,center:newCenter})},TileMap.prototype.renderMap=function(){if(this.canvas){var _a=this.props,width=_a.width,height=_a.height,layers=_a.layers,renderMap=_a.renderMap,_b=this.state,nw=_b.nw,se=_b.se,pan=_b.pan,size=_b.size,center=_b.center;renderMap({ctx:this.canvas.getContext("2d"),width:width,height:height,size:size,pan:pan,nw:nw,se:se,center:center,layers:layers})}},TileMap.prototype.getDz=function(){var zoom=this.state.zoom;return Math.sqrt(zoom)*(this.isMobile()?100:50)},TileMap.prototype.getDzZoomModifier=function(){return this.isMobile()?.005:.01},TileMap.prototype.isMobile=function(){return this.props.width<768},TileMap.prototype.getCanvasClassName=function(){var _a=this.props,classes="react-tile-map-canvas";return _a.isDraggable&&(classes+=" draggable"),_a.onClick&&(classes+=" clickable"),classes},TileMap.prototype.render=function(){var _a=this.props,width=_a.width,height=_a.height,classes=("react-tile-map "+_a.className).trim();return React.createElement("div",{className:classes},React.createElement("canvas",{className:this.getCanvasClassName(),width:width,height:height,ref:this.refCanvas}))},TileMap.defaultProps={x:0,y:0,className:"",initialX:0,initialY:0,size:14,width:640,height:480,zoom:1,minSize:7,maxSize:40,minX:-150,maxX:150,minY:-150,maxY:150,panX:0,panY:0,padding:4,isDraggable:!0,renderMap:map_1.renderMap},TileMap}(React.PureComponent);exports.TileMap=TileMap},661:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.debounce=function(fn,ms){var timeout=null;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];null!=timeout&&clearTimeout(timeout),timeout=setTimeout(function(){return fn.apply(void 0,args)},ms)}}},662:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Impetus=__webpack_require__(663),wheel=__webpack_require__(664),touchPinch=__webpack_require__(667),position=__webpack_require__(670);exports.panzoom=function panzoom(target,cb){var pos=position.emitter({element:target}),initX=0,initY=0,init=!0,initListener=function(){return init=!0};target.addEventListener("mousedown",initListener),target.addEventListener("touchstart",initListener);var lastY=0,lastX=0,impetus=new Impetus({source:target,update:function(x,y){init&&(init=!1,initX=pos[0],initY=pos[1]);var e={target:target,type:"mouse",dx:x-lastX,dy:y-lastY,dz:0,x:pos[0],y:pos[1],x0:initX,y0:initY};lastX=x,lastY=y,cb(e)},multiplier:1,friction:.75}),wheelListener=wheel(target,function(_dx,dy,_dz,e){e.preventDefault(),cb({target:target,type:"mouse",dx:0,dy:0,dz:dy,x:pos[0],y:pos[1],x0:pos[0],y0:pos[1]})}),pinch=touchPinch(target),initialCoords=null;return pinch.on("start",function(_curr){var _a=pinch.fingers,f1=_a[0],f2=_a[1];initialCoords=[.5*f2.position[0]+.5*f1.position[0],.5*f2.position[1]+.5*f1.position[1]],impetus&&impetus.pause()}),pinch.on("end",function(){initialCoords&&(initialCoords=null,impetus&&impetus.resume())}),pinch.on("change",function(curr,prev){pinch.pinching&&initialCoords&&cb({target:target,type:"touch",dx:0,dy:0,dz:2*-(curr-prev),x:initialCoords[0],y:initialCoords[1],x0:initialCoords[0],y0:initialCoords[0]})}),function dispose(){impetus.destroy(),pos.dispose(),pinch.removeAllListeners(),target.removeEventListener("wheel",wheelListener),target.removeEventListener("mousedown",initListener),target.removeEventListener("touchstart",initListener)}}},671:function(module,exports,__webpack_require__){"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getViewport=function getViewport(args){var width=args.width,height=args.height,center=args.center,pan=args.pan,size=args.size,padding=args.padding,dimensions={width:Math.ceil(width/size+padding),height:Math.ceil(height/size+padding)},panX=pan?Math.ceil(pan.x/size):0,panY=pan?Math.ceil(pan.y/size):0,nw={x:center.x-Math.ceil(dimensions.width/2)+panX,y:center.y+Math.ceil(dimensions.height/2)-panY},se={x:center.x+Math.ceil(dimensions.width/2)+panX,y:center.y-Math.ceil(dimensions.height/2)-panY};return __assign({},dimensions,{nw:nw,se:se,area:(se.x-nw.x)*(nw.y-se.y)})}},672:function(module,exports,__webpack_require__){var content=__webpack_require__(673);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(153)(content,options);content.locals&&(module.exports=content.locals)},673:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(152)(!1)).push([module.i,".react-tile-map {\n  position: relative;\n}\n\n.react-tile-map-canvas.clickable {\n  cursor: pointer;\n}\n\n.react-tile-map-canvas.draggable {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n.react-tile-map-canvas.draggable:active {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.react-tile-map-canvasPopup {\n  position: absolute;\n  pointer-events: none;\n}\n\n.react-tile-map-popup {\n  width: 100%;\n  margin-left: -50%;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.7);\n  box-shadow: 0 3px 14px rgba(0, 0, 0, 0.4);\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n}\n\n.react-tile-map-popup.move-left {\n  padding-left: 100%;\n}\n\n.react-tile-map-popup.move-right {\n  padding-left: 0%;\n}\n\n.react-tile-map-popup.visible {\n  opacity: 1;\n}\n",""])},675:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(152)(!1)).push([module.i,"html,\nbody,\n#root {\n  height: 100%;\n}\n",""])},676:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer } from '../src';\n\nimport './stories.css';\n\nconst chessboardLayer: Layer = (x, y) => {\n  return {\n    color: (x + y) % 2 === 0 ? '#cccccc' : '#888888',\n  };\n};\n\nstoriesOf('TileMap', module).add('1. Chessboard', () => <TileMap layers={[chessboardLayer]} />);\n",exports.__ADDS_MAP__={"tilemap--1-chessboard":{startLoc:{col:33,line:14},endLoc:{col:94,line:14}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50);__webpack_require__(211);var chessboardLayer=function(x,y){return{color:(x+y)%2==0?"#cccccc":"#888888"}};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("1. Chessboard",function(){return React.createElement(src_1.TileMap,{layers:[chessboardLayer]})})}).call(this,__webpack_require__(21)(module))},677:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer, Coord } from '../src';\n\n// prettier-ignore\nconst selected: Coord[] = [\n  { x: 0, y: 0 },\n  { x: 0, y: 1 },\n  { x: 1, y: 1 },\n  { x: 1, y: 2 }\n]\n\nfunction isSelected(x: number, y: number) {\n  return selected.some(coord => coord.x === x && coord.y === y);\n}\n\nconst chessboardLayer: Layer = (x, y) => {\n  return {\n    color: (x + y) % 2 === 0 ? '#cccccc' : '#888888',\n  };\n};\n\nconst selectedStrokeLayer: Layer = (x, y) => {\n  return isSelected(x, y) ? { color: '#00ff00', scale: 1.4 } : null;\n};\n\nconst selectedFillLayer: Layer = (x, y) => {\n  return isSelected(x, y) ? { color: '#00dd00', scale: 1.2 } : null;\n};\n\nstoriesOf('TileMap', module).add('2. Selection', () => (\n  <TileMap layers={[chessboardLayer, selectedStrokeLayer, selectedFillLayer]} />\n));\n",exports.__ADDS_MAP__={"tilemap--2-selection":{startLoc:{col:33,line:32},endLoc:{col:1,line:34}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50),selected=[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:2}];function isSelected(x,y){return selected.some(function(coord){return coord.x===x&&coord.y===y})}var chessboardLayer=function(x,y){return{color:(x+y)%2==0?"#cccccc":"#888888"}},selectedStrokeLayer=function(x,y){return isSelected(x,y)?{color:"#00ff00",scale:1.4}:null},selectedFillLayer=function(x,y){return isSelected(x,y)?{color:"#00dd00",scale:1.2}:null};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("2. Selection",function(){return React.createElement(src_1.TileMap,{layers:[chessboardLayer,selectedStrokeLayer,selectedFillLayer]})})}).call(this,__webpack_require__(21)(module))},678:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer, Coord } from '../src';\n\nlet hover: Coord = { x: 0, y: 0 };\n\nconst isPositive = (x: number, y: number) => x > 0 && y > 0;\n\nconst positiveLayer: Layer = (x, y) => {\n  return {\n    color: isPositive(x, y) ? '#cccccc' : '#888888',\n  };\n};\n\nconst hoverLayer: Layer = (x, y) => {\n  return hover.x === x && hover.y === y\n    ? { color: isPositive(x, y) ? '#ff0000' : '#00ff00' }\n    : null;\n};\n\nstoriesOf('TileMap', module).add('3. Hover', () => (\n  <TileMap layers={[positiveLayer, hoverLayer]} onHover={(x, y) => (hover = { x, y })} />\n));\n",exports.__ADDS_MAP__={"tilemap--3-hover":{startLoc:{col:33,line:22},endLoc:{col:1,line:24}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50),hover={x:0,y:0},isPositive=function(x,y){return x>0&&y>0},positiveLayer=function(x,y){return{color:isPositive(x,y)?"#cccccc":"#888888"}},hoverLayer=function(x,y){return hover.x===x&&hover.y===y?{color:isPositive(x,y)?"#ff0000":"#00ff00"}:null};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("3. Hover",function(){return React.createElement(src_1.TileMap,{layers:[positiveLayer,hoverLayer],onHover:function(x,y){return hover={x:x,y:y}}})})}).call(this,__webpack_require__(21)(module))},679:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer, Coord } from '../src';\n\nlet selected: Coord[] = [];\n\nconst isSelected = (x: number, y: number) => selected.some(coord => coord.x === x && coord.y === y);\n\nconst clickedLayer: Layer = (x, y) => {\n  return {\n    color: isSelected(x, y) ? '#00ff00' : '#888888',\n  };\n};\n\nstoriesOf('TileMap', module).add('4. Click', () => (\n  <TileMap layers={[clickedLayer]} onClick={(x, y) => selected.push({ x, y })} />\n));\n",exports.__ADDS_MAP__={"tilemap--4-click":{startLoc:{col:33,line:16},endLoc:{col:1,line:18}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50),selected=[],isSelected=function(x,y){return selected.some(function(coord){return coord.x===x&&coord.y===y})},clickedLayer=function(x,y){return{color:isSelected(x,y)?"#00ff00":"#888888"}};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("4. Click",function(){return React.createElement(src_1.TileMap,{layers:[clickedLayer],onClick:function(x,y){return selected.push({x:x,y:y})}})})}).call(this,__webpack_require__(21)(module))},680:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer } from '../src';\n\nconst connectedLayer: Layer = (x, y) => {\n  const top = x % 10 === 0;\n  const left = y % 10 === 0;\n  return {\n    color: top || left ? '#888888' : '#cccccc',\n    top,\n    left,\n  };\n};\n\nstoriesOf('TileMap', module).add('5. Connect', () => <TileMap layers={[connectedLayer]} />);\n",exports.__ADDS_MAP__={"tilemap--5-connect":{startLoc:{col:33,line:16},endLoc:{col:90,line:16}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50),connectedLayer=function(x,y){var top=x%10==0,left=y%10==0;return{color:top||left?"#888888":"#cccccc",top:top,left:left}};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("5. Connect",function(){return React.createElement(src_1.TileMap,{layers:[connectedLayer]})})}).call(this,__webpack_require__(21)(module))},681:function(module,exports,__webpack_require__){"use strict";(function(module){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer } from '../src';\n\nimport './6_Atlas.stories.css';\n\ntype AtlasTile = {\n  x: number;\n  y: number;\n  type: number;\n  estate_id: number;\n  left: number;\n  top: number;\n  topLeft: number;\n};\n\nlet atlas: Record<string, AtlasTile> | null = null;\n\nasync function loadTiles() {\n  const resp = await fetch('https://api.decentraland.org/v1/tiles');\n  const json = await resp.json();\n  atlas = json.data as Record<string, AtlasTile>;\n}\n\nloadTiles().catch(console.error);\n\nexport const COLOR_BY_TYPE = Object.freeze({\n  0: '#ff9990', // my parcels\n  1: '#ff4053', // my parcels on sale\n  2: '#ff9990', // my estates\n  3: '#ff4053', // my estates on sale\n  4: '#ffbd33', // parcels/estates where I have permissions\n  5: '#5054D4', // districts\n  6: '#563db8', // contributions\n  7: '#716C7A', // roads\n  8: '#70AC76', // plazas\n  9: '#3D3A46', // owned parcel/estate\n  10: '#3D3A46', // parcels on sale (we show them as owned parcels)\n  11: '#09080A', // unowned pacel/estate\n  12: '#18141a', // background\n  13: '#110e13', // loading odd\n  14: '#0d0b0e', // loading even\n});\n\nconst atlasLayer: Layer = (x, y) => {\n  const id = x + ',' + y;\n  if (atlas !== null && id in atlas) {\n    const tile = atlas[id];\n    const color = COLOR_BY_TYPE[tile.type];\n\n    const top = !!tile.top;\n    const left = !!tile.left;\n    const topLeft = !!tile.topLeft;\n\n    return {\n      color,\n      top,\n      left,\n      topLeft,\n    };\n  } else {\n    return {\n      color: (x + y) % 2 === 0 ? COLOR_BY_TYPE[12] : COLOR_BY_TYPE[13],\n    };\n  }\n};\n\nstoriesOf('TileMap', module).add('6. Atlas', () => (\n  <TileMap className=\"atlas\" layers={[atlasLayer]} />\n));\n",exports.__ADDS_MAP__={"tilemap--6-atlas":{startLoc:{col:33,line:69},endLoc:{col:1,line:71}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50);__webpack_require__(322);var atlas=null;(function loadTiles(){return __awaiter(this,void 0,void 0,function(){var json;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fetch("https://api.decentraland.org/v1/tiles")];case 1:return[4,_a.sent().json()];case 2:return json=_a.sent(),atlas=json.data,[2]}})})})().catch(console.error),exports.COLOR_BY_TYPE=Object.freeze({0:"#ff9990",1:"#ff4053",2:"#ff9990",3:"#ff4053",4:"#ffbd33",5:"#5054D4",6:"#563db8",7:"#716C7A",8:"#70AC76",9:"#3D3A46",10:"#3D3A46",11:"#09080A",12:"#18141a",13:"#110e13",14:"#0d0b0e"});var atlasLayer=function(x,y){var id=x+","+y;if(null!==atlas&&id in atlas){var tile=atlas[id];return{color:exports.COLOR_BY_TYPE[tile.type],top:!!tile.top,left:!!tile.left,topLeft:!!tile.topLeft}}return{color:(x+y)%2==0?exports.COLOR_BY_TYPE[12]:exports.COLOR_BY_TYPE[13]}};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("6. Atlas",function(){return React.createElement(src_1.TileMap,{className:"atlas",layers:[atlasLayer]})})}).call(this,__webpack_require__(21)(module))},682:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(152)(!1)).push([module.i,".atlas {\n  background-color: #18141a;\n}\n",""])},683:function(module,exports,__webpack_require__){"use strict";(function(module){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\nimport { TileMap, Layer, Coord } from '../src';\n\nimport './6_Atlas.stories.css';\n\ntype AtlasTile = {\n  x: number;\n  y: number;\n  type: number;\n  district_id?: number;\n  estate_id?: number;\n  left?: number;\n  top?: number;\n  topLeft?: number;\n  price?: number;\n};\n\nlet atlas: Record<string, AtlasTile> | null = null;\n\nasync function loadTiles() {\n  const resp = await fetch('https://api.decentraland.org/v1/tiles');\n  const json = await resp.json();\n  atlas = json.data as Record<string, AtlasTile>;\n}\n\nloadTiles().catch(console.error);\n\nexport const COLOR_BY_TYPE = Object.freeze({\n  0: '#ff9990', // my parcels\n  1: '#ff4053', // my parcels on sale\n  2: '#ff9990', // my estates\n  3: '#ff4053', // my estates on sale\n  4: '#ffbd33', // parcels/estates where I have permissions\n  5: '#5054D4', // districts\n  6: '#563db8', // contributions\n  7: '#716C7A', // roads\n  8: '#70AC76', // plazas\n  9: '#3D3A46', // owned parcel/estate\n  10: '#3D3A46', // parcels on sale (we show them as owned parcels)\n  11: '#09080A', // unowned pacel/estate\n  12: '#18141a', // background\n  13: '#110e13', // loading odd\n  14: '#0d0b0e', // loading even\n});\n\nlet selected: Coord[] = [];\n\nfunction isSelected(x: number, y: number) {\n  return selected.some(coord => coord.x === x && coord.y === y);\n}\n\nconst atlasLayer: Layer = (x, y) => {\n  const id = x + ',' + y;\n  if (atlas !== null && id in atlas) {\n    const tile = atlas[id];\n    const color = COLOR_BY_TYPE[tile.type];\n\n    const top = !!tile.top;\n    const left = !!tile.left;\n    const topLeft = !!tile.topLeft;\n\n    return {\n      color,\n      top,\n      left,\n      topLeft,\n    };\n  } else {\n    return {\n      color: (x + y) % 2 === 0 ? COLOR_BY_TYPE[12] : COLOR_BY_TYPE[13],\n    };\n  }\n};\n\nconst onSaleLayer: Layer = (x, y) => {\n  const id = x + ',' + y;\n  if (atlas && id in atlas && atlas[id].price) {\n    const color = '#00d3ff';\n    const top = !!atlas[id].top;\n    const left = !!atlas[id].left;\n    const topLeft = !!atlas[id].topLeft;\n    return {\n      color,\n      top,\n      left,\n      topLeft,\n    };\n  }\n  return null;\n};\n\nconst selectedStrokeLayer: Layer = (x, y) => {\n  return isSelected(x, y) ? { color: '#ff0044', scale: 1.4 } : null;\n};\n\nconst selectedFillLayer: Layer = (x, y) => {\n  return isSelected(x, y) ? { color: '#ff9990', scale: 1.2 } : null;\n};\n\nstoriesOf('TileMap', module).add('7. Atlas + On Sale + Click Parcel', () => (\n  <TileMap\n    className=\"atlas\"\n    layers={[atlasLayer, onSaleLayer, selectedStrokeLayer, selectedFillLayer]}\n    onClick={(x, y) => {\n      if (isSelected(x, y)) {\n        selected = selected.filter(coord => coord.x !== x || coord.y !== y);\n      } else {\n        selected.push({ x, y });\n      }\n    }}\n  />\n));\n",exports.__ADDS_MAP__={"tilemap--7-atlas-on-sale-click-parcel":{startLoc:{col:33,line:102},endLoc:{col:1,line:114}}};var React=__webpack_require__(0),react_1=__webpack_require__(43),src_1=__webpack_require__(50);__webpack_require__(322);var atlas=null;(function loadTiles(){return __awaiter(this,void 0,void 0,function(){var json;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fetch("https://api.decentraland.org/v1/tiles")];case 1:return[4,_a.sent().json()];case 2:return json=_a.sent(),atlas=json.data,[2]}})})})().catch(console.error),exports.COLOR_BY_TYPE=Object.freeze({0:"#ff9990",1:"#ff4053",2:"#ff9990",3:"#ff4053",4:"#ffbd33",5:"#5054D4",6:"#563db8",7:"#716C7A",8:"#70AC76",9:"#3D3A46",10:"#3D3A46",11:"#09080A",12:"#18141a",13:"#110e13",14:"#0d0b0e"});var selected=[];function isSelected(x,y){return selected.some(function(coord){return coord.x===x&&coord.y===y})}var atlasLayer=function(x,y){var id=x+","+y;if(null!==atlas&&id in atlas){var tile=atlas[id];return{color:exports.COLOR_BY_TYPE[tile.type],top:!!tile.top,left:!!tile.left,topLeft:!!tile.topLeft}}return{color:(x+y)%2==0?exports.COLOR_BY_TYPE[12]:exports.COLOR_BY_TYPE[13]}},onSaleLayer=function(x,y){var id=x+","+y;if(atlas&&id in atlas&&atlas[id].price){return{color:"#00d3ff",top:!!atlas[id].top,left:!!atlas[id].left,topLeft:!!atlas[id].topLeft}}return null},selectedStrokeLayer=function(x,y){return isSelected(x,y)?{color:"#ff0044",scale:1.4}:null},selectedFillLayer=function(x,y){return isSelected(x,y)?{color:"#ff9990",scale:1.2}:null};react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__)).add("7. Atlas + On Sale + Click Parcel",function(){return React.createElement(src_1.TileMap,{className:"atlas",layers:[atlasLayer,onSaleLayer,selectedStrokeLayer,selectedFillLayer],onClick:function(x,y){isSelected(x,y)?selected=selected.filter(function(coord){return coord.x!==x||coord.y!==y}):selected.push({x:x,y:y})}})})}).call(this,__webpack_require__(21)(module))},684:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\n// @ts-ignore\nimport { withKnobs, number } from '@storybook/addon-knobs';\n\nimport { TileMap, Layer } from '../src';\n\nimport './stories.css';\n\nconst chessboardLayer: Layer = (x, y) => {\n  return {\n    color: (x + y) % 2 === 0 ? '#cccccc' : '#888888',\n  };\n};\n\nconst stories = storiesOf('TileMap', module);\n\nstories.addDecorator(withKnobs);\n\nstories.add('8. Controlled zoom', () => {\n  return <TileMap layers={[chessboardLayer]} zoom={number('Zoom', 2)} />;\n});\n",exports.__ADDS_MAP__={};var React=__webpack_require__(0),react_1=__webpack_require__(43),addon_knobs_1=__webpack_require__(323),src_1=__webpack_require__(50);__webpack_require__(211);var chessboardLayer=function(x,y){return{color:(x+y)%2==0?"#cccccc":"#888888"}},stories=react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__));stories.addDecorator(addon_knobs_1.withKnobs),stories.add("8. Controlled zoom",function(){return React.createElement(src_1.TileMap,{layers:[chessboardLayer],zoom:addon_knobs_1.number("Zoom",2)})})}).call(this,__webpack_require__(21)(module))},706:function(module,exports,__webpack_require__){"use strict";(function(module){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.withStorySource=__webpack_require__(49).withStorySource,exports.__STORY__="import * as React from 'react';\n\nimport { storiesOf } from '@storybook/react';\n// @ts-ignore\nimport { withKnobs, number } from '@storybook/addon-knobs';\n\nimport { TileMap, Layer } from '../src';\n\nimport './9_Atlas_controlled_xy.stories.css';\n\ntype AtlasTile = {\n  x: number;\n  y: number;\n  type: number;\n  estate_id: number;\n  left: number;\n  top: number;\n  topLeft: number;\n};\n\nlet atlas: Record<string, AtlasTile> | null = null;\n\nasync function loadTiles() {\n  const resp = await fetch('https://api.decentraland.org/v1/tiles');\n  const json = await resp.json();\n  atlas = json.data as Record<string, AtlasTile>;\n}\n\nloadTiles().catch(console.error);\n\nexport const COLOR_BY_TYPE = Object.freeze({\n  0: '#ff9990', // my parcels\n  1: '#ff4053', // my parcels on sale\n  2: '#ff9990', // my estates\n  3: '#ff4053', // my estates on sale\n  4: '#ffbd33', // parcels/estates where I have permissions\n  5: '#5054D4', // districts\n  6: '#563db8', // contributions\n  7: '#716C7A', // roads\n  8: '#70AC76', // plazas\n  9: '#3D3A46', // owned parcel/estate\n  10: '#3D3A46', // parcels on sale (we show them as owned parcels)\n  11: '#09080A', // unowned pacel/estate\n  12: '#18141a', // background\n  13: '#110e13', // loading odd\n  14: '#0d0b0e', // loading even\n});\n\nconst atlasLayer: Layer = (x, y) => {\n  const id = x + ',' + y;\n  if (atlas !== null && id in atlas) {\n    const tile = atlas[id];\n    const color = COLOR_BY_TYPE[tile.type];\n\n    const top = !!tile.top;\n    const left = !!tile.left;\n    const topLeft = !!tile.topLeft;\n\n    return {\n      color,\n      top,\n      left,\n      topLeft,\n    };\n  } else {\n    return {\n      color: (x + y) % 2 === 0 ? COLOR_BY_TYPE[12] : COLOR_BY_TYPE[13],\n    };\n  }\n};\nconst stories = storiesOf('TileMap', module);\n\nstories.addDecorator(withKnobs);\n\nstories.add('9. Controlled X/Y', () => {\n  return <TileMap className=\"atlas\" layers={[atlasLayer]} x={number('x', 0)} y={number('y', 0)} />;\n});\n",exports.__ADDS_MAP__={};var React=__webpack_require__(0),react_1=__webpack_require__(43),addon_knobs_1=__webpack_require__(323),src_1=__webpack_require__(50);__webpack_require__(707);var atlas=null;(function loadTiles(){return __awaiter(this,void 0,void 0,function(){var json;return __generator(this,function(_a){switch(_a.label){case 0:return[4,fetch("https://api.decentraland.org/v1/tiles")];case 1:return[4,_a.sent().json()];case 2:return json=_a.sent(),atlas=json.data,[2]}})})})().catch(console.error),exports.COLOR_BY_TYPE=Object.freeze({0:"#ff9990",1:"#ff4053",2:"#ff9990",3:"#ff4053",4:"#ffbd33",5:"#5054D4",6:"#563db8",7:"#716C7A",8:"#70AC76",9:"#3D3A46",10:"#3D3A46",11:"#09080A",12:"#18141a",13:"#110e13",14:"#0d0b0e"});var atlasLayer=function(x,y){var id=x+","+y;if(null!==atlas&&id in atlas){var tile=atlas[id];return{color:exports.COLOR_BY_TYPE[tile.type],top:!!tile.top,left:!!tile.left,topLeft:!!tile.topLeft}}return{color:(x+y)%2==0?exports.COLOR_BY_TYPE[12]:exports.COLOR_BY_TYPE[13]}},stories=react_1.storiesOf("TileMap",module).addDecorator(exports.withStorySource(exports.__STORY__,exports.__ADDS_MAP__));stories.addDecorator(addon_knobs_1.withKnobs),stories.add("9. Controlled X/Y",function(){return React.createElement(src_1.TileMap,{className:"atlas",layers:[atlasLayer],x:addon_knobs_1.number("x",0),y:addon_knobs_1.number("y",0)})})}).call(this,__webpack_require__(21)(module))},707:function(module,exports,__webpack_require__){var content=__webpack_require__(708);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(153)(content,options);content.locals&&(module.exports=content.locals)},708:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(152)(!1)).push([module.i,".atlas {\n  background-color: #18141a;\n}\n",""])}},[[334,1,2]]]);
//# sourceMappingURL=main.632e213f4f96693948fc.bundle.js.map